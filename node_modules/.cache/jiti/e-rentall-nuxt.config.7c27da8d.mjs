"use strict";Object.defineProperty(exports, "__esModule", { value: true });exports.default = void 0;
var _vite = _interopRequireDefault(await jitiImport("@tailwindcss/vite"));
var _vite2 = _interopRequireDefault(await jitiImport("unplugin-icons/vite"));
var _pluginVue = _interopRequireDefault(await jitiImport("@vitejs/plugin-vue"));function _interopRequireDefault(e) {return e && e.__esModule ? e : { default: e };} // https://nuxt.com/docs/api/configuration/nuxt-config
var _default = exports.default =
defineNuxtConfig({
  compatibilityDate: '2025-07-01',
  devtools: { enabled: true },
  debug: true,

  vite: {
    plugins: [
    (0, _vite.default)(),
    (0, _vite2.default)({
      autoInstall: true
    })],

    css: {
      devSourcemap: true
    },
    build: {
      sourcemap: process.env.NODE_ENV === 'development'
    }
  },
  css: ['~/assets/app.css', '~/assets/css/swiper-custom.css'],
  modules: [
  '@nuxt/eslint',
  '@nuxt/fonts',
  '@nuxt/icon',
  '@nuxt/image',
  '@nuxt/scripts',
  '@nuxt/test-utils',
  '@pinia/nuxt',
  'pinia-plugin-persistedstate/nuxt'],


  // Configuration des ic√¥nes pour la production
  icon: {
    serverBundle: {
      collections: ['mdi'] // Sp√©cifier uniquement les collections utilis√©es
    },
    clientBundle: {
      scan: true, // Scanner automatiquement les ic√¥nes utilis√©es
      sizeLimitKb: 256 // Limiter la taille du bundle client
    },
    mode: 'css' // Utiliser le mode CSS pour de meilleures performances
  },
  runtimeConfig: {
    mail: {
      smtp: {
        host: process.env.SMTP_HOST || '',
        port: parseInt(process.env.SMTP_PORT || '587'),
        auth: {
          user: process.env.SMTP_USER || '',
          pass: process.env.SMTP_PASS || ''
        }
      }
    },
    mailFromAddress: process.env.MAIL_FROM_ADDRESS || '',
    public: {
      appName: 'location-voitures-madagascar',
      supabaseUrl: process.env.SUPABASE_URL || '',
      supabaseKey: process.env.SUPABASE_KEY || ''
    }
  },

  // Configuration hybride optimale pour blog + app interactive
  routeRules: {
    // üè† Landing page et pages statiques - SSR pour SEO
    '/': { ssr: true, prerender: true },
    '/how-it-works': { ssr: true, prerender: true },
    '/terms': { ssr: true, prerender: true },
    '/privacy': { ssr: true, prerender: true },
    '/contact': { ssr: true, prerender: true },
    '/about': { ssr: true, prerender: true },

    // üöó Section v√©hicules - CSR pour interactivit√© (filtres, recherche)
    '/vehicles': { ssr: false },
    '/vehicles/**': { ssr: false },

    // üë§ Pages utilisateur publiques - SSR pour SEO mais sans prerender
    '/users/**': { ssr: true, prerender: false },

    // üîí Pages prot√©g√©es - CSR obligatoire
    '/admin/**': { ssr: false },
    '/profile/**': { ssr: false },
    '/vehicles/my-vehicles': { ssr: false },
    '/bookings/**': { ssr: false },
    '/messages/**': { ssr: false },
    '/auth/**': { ssr: false }
  },

  // Optimisations de performance
  nitro: {
    rollupConfig: {
      plugins: [(0, _pluginVue.default)()]
    },
    esbuild: {
      options: {
        target: 'es2020'
      }
    }
    // // Configuration pour r√©soudre les probl√®mes avec vue-email
    // experimental: {
    //   wasm: true
    // },
    // // Exclure les modules probl√©matiques du bundling
    // externals: {
    //   inline: ['vue-mail', 'nodemailer']
    // }
  },

  // Optimisation des ressources
  app: {
    head: {
      meta: [
      { charset: 'utf-8' },
      { name: 'viewport', content: 'width=device-width, initial-scale=1' },
      { name: 'description', content: 'Location de voitures entre particuliers √† Madagascar' },
      { name: 'theme-color', content: '#3B82F6' }]

    }
  },

  // Configuration des plugins
  plugins: ['~/plugins/dayjs.client.ts', '~/plugins/supabase.client.ts'],

  // Configuration de build
  build: {
    transpile: ['@headlessui/vue']
  },

  // Optimisation du cache pour les pages CSR
  experimental: {
    payloadExtraction: false,
    renderJsonPayloads: false
  },

  // Configuration TypeScript
  typescript: {
    typeCheck: false
  }
}); /* v9-97ebcde42d879d63 */
